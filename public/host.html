<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POK√âMON QUIZ ENGINE V2</title>
    <link rel="stylesheet" href="styles/common.css?v=2.3">
    <link rel="stylesheet" href="styles/host.css?v=2.3">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Configuration Dashboard -->
        <div id="config-screen" class="screen flex-center">
            <div class="retro-box config-container">
                <header>
                    <h1>POK√âMON ENGINE V2</h1>
                    <p class="subtitle">-- MENU PRINCIPAL --</p>
                </header>

                <div class="config-section">
                    <h3>1. CHOISIS TON MODE</h3>
                    <div class="modes-grid">
                        <button class="mode-btn selected" onclick="selectMode('CLASSIC')" data-mode="CLASSIC">
                            <span class="icon">üéØ</span> QUIZ IMAGE
                        </button>
                        <button class="mode-btn" onclick="selectMode('SHADOW')" data-mode="SHADOW">
                            <span class="icon">üë•</span> OMBRE CHINOISE
                        </button>
                        <button class="mode-btn" onclick="selectMode('TYPES')" data-mode="TYPES">
                            <span class="icon">üî•</span> MA√éTRE TYPES
                        </button>
                        <button class="mode-btn" onclick="selectMode('CRY')" data-mode="CRY">
                            <span class="icon">üîä</span> CRI DE GUERRE
                        </button>
                        <button class="mode-btn" onclick="selectMode('SURVIVAL')" data-mode="SURVIVAL">
                            <span class="icon">üíÄ</span> SURVIE
                        </button>
                        <button class="mode-btn" onclick="selectMode('MARATHON')" data-mode="MARATHON">
                            <span class="icon">üèÉ</span> MARATHON 151
                        </button>
                    </div>
                </div>

                <div class="config-section" id="questions-config">
                    <h3>2. LONGUEUR DU QUIZ</h3>
                    <div class="range-selector">
                        <input type="range" id="questions-range" min="5" max="50" value="12" oninput="updateRangeVal(this.value)">
                        <span id="questions-val">12 QUESTIONS</span>
                    </div>
                </div>

                <button id="create-lobby-btn" class="btn large-btn blink">CR√âER LE LOBBY</button>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen hidden">
            <div class="lobby-header">
                <div class="lobby-info retro-box">
                    <h2>CODE: <span id="display-game-code" class="blink">----</span></h2>
                    <p id="mode-display">MODE: CLASSIQUE</p>
                </div>
                <div class="qr-box retro-box">
                    <div id="qrcode"></div>
                </div>
            </div>
            
            <div class="players-container retro-box">
                <h3>JOUEURS CONNECT√âS (<span id="player-count">0</span>/10)</h3>
                <div id="players-list" class="players-grid-10">
                    <!-- Players inserted here -->
                </div>
            </div>

            <button id="start-game-btn" class="btn large-btn hidden">LANCER LE MATCH !</button>
        </div>

        <!-- Question Screen -->
        <div id="question-screen" class="screen hidden">
            <div class="top-bar">
                <div class="timer-wrapper retro-box">
                    <div id="timer-bar-fill"></div>
                </div>
                <div class="progress-box retro-box">
                    Q: <span id="current-q">1</span>/<span id="total-q">12</span>
                </div>
            </div>

            <div class="main-stage">
                <div class="pokemon-frame retro-box">
                    <img id="pokemon-sprite" src="" class="pixel-art">
                </div>
                <div class="question-text-box retro-box">
                    <p id="question-text">Loading...</p>
                </div>
            </div>

            <div id="options-grid" class="options-grid">
                <!-- Options here -->
            </div>
            
            <!-- Area for Text Input visualization -->
            <div id="text-mode-indicator" class="hidden retro-box" style="text-align:center; font-size:1.5rem;">
                ‚úçÔ∏è LES JOUEURS √âCRIVENT...
                <div id="text-input-players" class="player-grid-small"></div>
            </div>
            
            <!-- Type Selector for Type Master Mode -->
            <div id="type-selector" class="type-grid hidden">
                <!-- Type buttons here -->
            </div>
        </div>

        <!-- Result Popup (Overlay) -->
        <div id="result-popup" class="popup-overlay hidden">
            <div class="retro-box popup-content">
                <h2 id="result-title">R√âSULTAT !</h2>
                <div class="result-details">
                    <img id="result-sprite" src="">
                    <p class="answer-reveal">C'√©tait : <span id="correct-answer">Pikachu</span></p>
                    <div class="winner-box">
                        <p>üèÜ GAGNANT : <span id="round-winner">Pierre</span></p>
                        <p class="reaction-time">Temps : <span id="round-time">1.24s</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen hidden">
            <h1 class="retro-font">Classement</h1>
            <div id="leaderboard-list" class="leaderboard-container">
                <!-- Leaderboard entries -->
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="game-over-screen" class="screen hidden">
            <div class="game-over-content flex-center">
                <div class="retro-box game-over-box">
                    <h1 class="retro-font" style="font-size: 3rem; margin-bottom: 20px;">FIN DE PARTIE</h1>
                    <div id="final-podium" class="podium-container"></div>
                    <div class="action-footer">
                        <button onclick="location.reload()" class="btn large-btn blink">RETOUR AU MENU</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/host.js"></script>
</body>
</html>
